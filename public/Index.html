<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MimiFiscal – Asistent fiscal digital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .hero-gradient {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    }
  </style>
</head>
<body class="bg-gray-100 text-slate-800">

  <!-- HERO -->
  <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="#" class="text-xl font-bold text-blue-700 hover:text-blue-900 transition-colors">MimiFiscal</a>
      <nav class="space-x-6 hidden md:flex text-sm font-medium text-slate-600">
        <a href="#servicii" class="hover:text-blue-700 transition-colors">Servicii</a>
        <a href="#doneaza" class="hover:text-blue-700 transition-colors">Donații</a>
        <a href="#contact" class="hover:text-blue-700 transition-colors">Contact</a>
      </nav>
    </div>
  </header>

  <section class="hero-gradient text-center py-24 px-4 relative overflow-hidden">
    <div class="max-w-4xl mx-auto relative z-10">
      <h2 class="text-4xl md:text-5xl font-extrabold text-blue-900 mb-6 leading-tight">
        Simplificăm birocrația pentru românii din Germania
      </h2>
      <p class="text-lg md:text-xl text-slate-700 mb-8">
        Formulare fiscale, Kindergeld, dublă impozitare – totul completat automat și explicat simplu.
      </p>
      <a href="#demo" id="try-free-btn" class="bg-blue-700 text-white px-10 py-4 rounded-full text-base font-semibold hover:bg-blue-800 transition transform hover:scale-105 shadow-lg">
        Încearcă gratuit
      </a>
    </div>
    <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-100 to-transparent"></div>
  </section>

  <!-- SERVICII -->
  <section id="servicii" class="py-20 px-6 bg-gray-100">
    <div class="text-center mb-12">
      <h3 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Ce oferim</h3>
      <p class="text-lg text-slate-600">Servicii digitale create special pentru nevoile tale.</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto">
      <!-- Card 1 -->
      <div class="bg-white p-8 rounded-2xl shadow-lg flex flex-col items-center text-center">
        <h4 class="text-xl font-semibold mb-2 text-slate-900">📄 Formular ANAF</h4>
        <p class="text-base text-slate-600 mb-6">Evită dubla impozitare DE-RO: Completare + generare PDF</p>
        <a href="assets/Fiscalresidence.pdf" download class="mt-auto bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition">
          Descarcă
        </a>
      </div>
      <!-- Card 2 -->
      <div class="bg-white p-8 rounded-2xl shadow-lg flex flex-col items-center text-center">
        <h4 class="text-xl font-semibold mb-2 text-slate-900">👨‍👩‍👧 Kindergeld</h4>
        <p class="text-base text-slate-600 mb-6">Cerere automată + traducere în română. Ghid complet pas cu pas.</p>
        <a href="https://www.arbeitsagentur.de/familie-und-kinder/downloads-familie-und-kinder/formulare-kindergeld" target="_blank" rel="noopener noreferrer" class="mt-auto bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition">
          Accesează
        </a>
      </div>
      <!-- Card 3 (Chatbot) -->
      <div id="demo" class="bg-white p-8 rounded-2xl shadow-lg flex flex-col text-center">
        <h4 class="text-xl font-semibold mb-2 text-slate-900">💬 AI Fiscal</h4>
        <p class="text-base text-slate-600 mb-4">Întreabă robotul fiscal ce formular ai nevoie și ce taxe poți deduce.</p>
        <div class="mt-auto bg-gray-50 p-6 rounded-xl text-left shadow-inner">
          <h4 class="text-lg font-bold mb-2 text-blue-800">Testează-l aici:</h4>
          <div id="chat-container" class="bg-white p-4 rounded-xl h-48 overflow-y-auto mb-4 border border-gray-200">
            <p class="text-slate-500 italic text-sm">Salut, sunt MimiFiscal! Întreabă-mă orice despre taxe și formulare fiscale.</p>
          </div>
          <div class="flex space-x-3">
            <input type="text" id="user-input" placeholder="Scrie întrebarea ta..." class="flex-grow px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
            <button id="send-button" class="bg-blue-700 text-white px-6 py-3 rounded-full hover:bg-blue-800 transition shadow-md">
              Trimite
            </button>
          </div>
          <div id="loading-indicator" class="hidden mt-3 text-sm text-slate-500 text-center">
            Se procesează...
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DONAȚII -->
  <section id="doneaza" class="py-20 px-6 bg-blue-50 text-center">
    <h3 class="text-3xl md:text-4xl font-bold mb-4 text-slate-800">Susține-ne munca!</h3>
    <p class="text-lg text-slate-600 mb-8">Dacă ești mulțumit de serviciile gratuite, poți contribui printr-o mică donație.</p>
    <a href="https://paypal.me/Laurdur" target="_blank" class="bg-blue-700 text-white px-10 py-4 rounded-full font-semibold hover:bg-blue-800 transition">
      Donează acum
    </a>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="py-20 text-center bg-white">
    <h3 class="text-3xl font-bold mb-4 text-slate-800">Ai întrebări?</h3>
    <p class="text-lg text-slate-600 mb-8">Scrie-ne pe <strong class="text-blue-600">contact@mimifiscal.com</strong></p>
    <a href="mailto:contact@mimifiscal.com" class="text-blue-700 text-lg font-medium hover:underline">Trimite email</a>
  </section>

  <footer class="bg-slate-800 text-white py-6 text-center text-sm">
    © 2025 MimiFiscal · Made in 🇩🇪 + 🇷🇴
  </footer>

  <!-- SCRIPT CHAT -->
  <script>
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const chatContainer = document.getElementById('chat-container');
    const loadingIndicator = document.getElementById('loading-indicator');
    const tryFreeButton = document.getElementById('try-free-btn');

    function addMessage(text, isUser = false) {
      const div = document.createElement('div');
      div.className = `p-3 my-2 rounded-xl max-w-[85%] ${isUser ? 'bg-blue-500 text-white ml-auto' : 'bg-gray-200 text-slate-800 mr-auto'}`;
      div.textContent = text;
      chatContainer.appendChild(div);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function sendMessage() {
      const prompt = userInput.value.trim();
      if (!prompt) return;

      addMessage(prompt, true);
      userInput.value = '';
      loadingIndicator.classList.remove('hidden');

      try {
        const response = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt })
        });

        const data = await response.json();
        const text = data?.candidates?.[0]?.content?.parts?.[0]?.text || "Nu am putut găsi un răspuns.";
        addMessage(text, false);
      } catch (err) {
        addMessage("Eroare la procesarea cererii.", false);
      } finally {
        loadingIndicator.classList.add('hidden');
      }
    }

    sendButton.addEventListener('click', sendMessage);
    userInput.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });
    tryFreeButton.addEventListener('click', () => setTimeout(() => userInput.focus(), 100));
  </script>
</body>
</html>
