<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>MimiFiscal – Asistent fiscal digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .hero-gradient {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }
        .glowing-border {
            position: relative;
            z-index: 10;
        }
        .glowing-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 1.5rem;
            background: linear-gradient(45deg, #4299e1, #667eea, #9f7aea, #d53f8c);
            z-index: -1;
            filter: blur(8px);
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .glowing-border.glowing::before {
            opacity: 1;
        }
        .message-bubble.user {
            background-color: #3b82f6;
            color: white;
            border-bottom-right-radius: 0.5rem;
            align-self: flex-end;
            margin-left: auto;
        }
        .message-bubble.ai {
            background-color: #e5e7eb;
            color: #1f2937;
            border-bottom-left-radius: 0.5rem;
            align-self: flex-start;
            margin-right: auto;
        }
        .chat-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        /* New spinner animation */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3b82f6; /* Blue */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .send-button {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .send-button:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-blue-50 text-slate-800">

    <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center text-xl font-bold text-blue-700 hover:text-blue-900 transition-colors">
                MimiFiscal
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Flag_of_Germany.svg" alt="Steagul Germaniei" class="h-6 w-auto ml-2 rounded-sm" />
                <img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Romania.svg" alt="Steagul României" class="h-6 w-auto ml-1 rounded-sm" />
            </a>
            <nav class="space-x-4 hidden md:flex text-sm font-medium text-slate-600">
                <a href="#servicii" class="hover:text-blue-700 transition-colors">Servicii</a>
                <a href="#doneaza" class="hover:text-blue-700 transition-colors">Donații</a>
                <a href="#contact" class="hover:text-blue-700 transition-colors">Contact</a>
            </nav>
        </div>
    </header>

    <section class="hero-gradient text-center py-24 px-4 relative overflow-hidden">
        <div class="max-w-4xl mx-auto relative z-10">
            <h2 class="text-4xl md:text-5xl font-extrabold text-blue-900 mb-6 leading-tight">
                Simplificăm birocrația pentru românii din Germania
            </h2>
            <p class="text-lg md:text-xl text-slate-700 mb-8 px-4">
                Formulare fiscale, Kindergeld, dublă impozitare, totul completat automat și explicat simplu.
            </p>
            <a href="#demo" id="try-free-btn" class="bg-blue-700 text-white px-10 py-4 rounded-full text-base font-semibold hover:bg-blue-800 transition transform hover:scale-105 shadow-lg">
                Încearcă gratuit
            </a>
        </div>
        <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-100 to-transparent"></div>
    </section>

    <section id="servicii" class="py-16 px-4 sm:px-6 bg-gradient-to-b from-gray-100 to-white">
        <div class="text-center mb-12">
            <h3 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Ce oferim</h3>
            <p class="text-lg text-slate-600">Servicii digitale create special pentru nevoile tale.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <div class="bg-gradient-to-br from-white to-blue-200 p-8 rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-transform duration-300 flex flex-col items-center text-center">
                <div class="bg-green-100 text-green-700 rounded-full p-4 mb-4">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </div>
                <h4 class="text-xl font-semibold mb-2 text-slate-900">📄 Formular ANAF</h4>
                <p class="text-base text-slate-600 mb-6">Evită dubla impozitare DE-RO: Completare + generare PDF</p>
                <a href="assets/CerereRezidentaFiscala.pdf" download="CerereRezidentaFiscala.pdf" class="mt-auto bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition transform hover:-translate-y-1 inline-block font-semibold">
                    Descarcă
                </a>
            </div>
            <div class="bg-gradient-to-br from-white to-blue-200 p-8 rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-transform duration-300 flex flex-col items-center text-center">
                <div class="bg-yellow-100 text-yellow-700 rounded-full p-4 mb-4">
                    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15M9 6v12M15 6v12" />
                    </svg>
                </div>
                <h4 class="text-xl font-semibold mb-2 text-slate-900">👨‍👩‍👧 Kindergeld</h4>
                <p class="text-base text-slate-600 mb-6">Cerere automată + traducere în română. Ghid complet pas cu pas.</p>
                <a href="https://www.arbeitsagentur.de/familie-und-kinder/downloads-familie-und-kinder/formulare-kindergeld" target="_blank" rel="noopener noreferrer" class="mt-auto bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition transform hover:-translate-y-1 inline-block font-semibold">
                    Accesează
                </a>
            </div>
        </div>
    </section>

    <hr class="my-10 max-w-7xl mx-auto border-gray-300">

    <section id="demo" class="py-16 px-4 sm:px-6 bg-gradient-to-b from-blue-100 to-white">
        <div class="max-w-4xl mx-auto text-center">
            <h3 class="text-3xl md:text-4xl font-bold mb-4 text-slate-800">💬 AI Fiscal</h3>
            <p class="text-lg text-slate-600 mb-8">Întreabă robotul fiscal ce formular ai nevoie și ce taxe poți deduce.</p>
            <div class="bg-red-100 text-red-700 border border-red-200 rounded-xl p-4 mb-6 shadow-sm">
                <p class="font-semibold">Atentie:</p>
                <p class="text-sm">Informațiile furnizate pe acest site au caracter pur informativ și nu constituie consultanță fiscală. Pentru sfaturi personalizate, te rugăm să consulți un expert fiscal autorizat. Proprietarul acestui site, Laur, nu deține nicio autorizație fiscală.</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg glowing-border text-left">
                <div id="chat-container" class="bg-gray-50 p-4 rounded-xl h-96 overflow-y-auto mb-4 border border-gray-200 chat-container">
                    <div class="message-bubble ai p-3 my-2 rounded-xl max-w-[85%]">
                        Salut, sunt MimiFiscal, asistentul tău digital. Întreabă-mă orice despre impozite și formulare fiscale!
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                    <input type="text" id="user-input" placeholder="Scrie întrebarea ta..." class="flex-grow px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <button id="send-button" class="send-button bg-blue-700 text-white px-6 py-3 rounded-full hover:bg-blue-800 transition transform hover:scale-105 shadow-md flex items-center justify-center">
                        Trimite
                    </button>
                </div>
                <div id="loading-indicator" class="hidden mt-4 flex items-center justify-center space-x-2">
                    <div class="loader"></div>
                    <span class="text-sm text-slate-800">Se procesează...</span>
                </div>
            </div>
        </div>
    </section>

    <section id="doneaza" class="py-16 px-4 sm:px-6 bg-gradient-to-b from-blue-50 to-white text-center">
        <div class="max-w-4xl mx-auto">
            <h3 class="text-3xl md:text-4xl font-bold mb-4 text-slate-800">Susține-ne munca!</h3>
            <p class="text-lg text-slate-600 mb-8">
                Dacă ești mulțumit de serviciile gratuite, ne poți susține munca printr-o mică donație. Fiecare contribuție ne ajută să menținem platforma activă și să dezvoltăm noi funcționalități.
            </p>
            <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 mx-auto">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal Logo" class="w-28 h-auto opacity-80">
                <a href="https://paypal.me/Laurdur" target="_blank" rel="noopener noreferrer" class="bg-blue-700 text-white px-10 py-4 rounded-full text-base font-semibold hover:bg-blue-800 transition transform hover:scale-105 shadow-lg">
                    Donează acum
                </a>
            </div>
        </div>
    </section>

    <section id="contact" class="py-16 px-4 sm:px-6 text-center bg-gradient-to-b from-white to-gray-100">
        <div class="max-w-xl mx-auto">
            <h3 class="text-3xl font-bold mb-4 text-slate-800">Ai întrebări?</h3>
            <p class="text-lg text-slate-600 mb-8">Scrie-ne pe <strong class="text-blue-600">contact@mimifiscal.com</strong> sau WhatsApp și te ajutăm rapid.</p>
            <a href="mailto:contact@mimifiscal.com" class="text-blue-700 text-lg font-medium hover:underline transition-colors">Trimite email</a>
        </div>
    </section>

    <footer class="bg-slate-800 text-white py-6 text-center text-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <p class="mb-1">© 2025 MimiFiscal · Operat de Laur · <a href="#disclaimer" class="underline">Disclaimer</a> · GDPR Compliant</p>
            <p>Made in 
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Flag_of_Germany.svg" alt="Steagul Germaniei" class="h-4 w-auto inline-block mx-1 rounded-sm" />
            <img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Flag_of_Romania.svg" alt="Steagul României" class="h-4 w-auto inline-block mx-1 rounded-sm" />
            </p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const chatContainer = document.getElementById('chat-container');
            const loadingIndicator = document.getElementById('loading-indicator');
            const tryFreeButton = document.getElementById('try-free-btn');
            const chatCard = document.querySelector('#demo .bg-white');

            const apiEndpoint = '/api/ask'; 
            
            function addMessage(text, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `p-3 my-2 rounded-xl max-w-[85%] message-bubble ${isUser ? 'user' : 'ai'}`;
                messageDiv.textContent = text;
                chatContainer.appendChild(messageDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            async function sendMessage() {
                const prompt = userInput.value.trim();
                if (prompt === '') return;

                addMessage(prompt, true);
                userInput.value = '';
                userInput.disabled = true;
                sendButton.disabled = true;
                loadingIndicator.classList.remove('hidden');

                try {
                    const response = await fetch(apiEndpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: prompt })
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`API response status: ${response.status}. Body: ${errorText}`);
                    }

                    const result = await response.json();
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || 'Nu am putut găsi un răspuns. Te rog să încerci din nou.';
                    addMessage(text, false);
                } catch (error) {
                    console.error("Eroare la apelul către Vercel:", error);
                    addMessage(`A apărut o eroare la procesarea cererii. Te rog să încerci din nou.`, false);
                } finally {
                    loadingIndicator.classList.add('hidden');
                    userInput.disabled = false;
                    sendButton.disabled = false;
                    userInput.focus();
                }
            }
            
            sendButton.addEventListener('click', sendMessage);
            userInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    sendMessage();
                }
            });

            chatCard.addEventListener('mouseenter', () => {
                chatCard.classList.add('glowing');
            });
            chatCard.addEventListener('mouseleave', () => {
                chatCard.classList.remove('glowing');
            });

            tryFreeButton.addEventListener('click', () => {
                setTimeout(() => {
                    userInput.focus();
                }, 100);
            });
        });
    </script>
</body>
</html>
