<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MimiFiscal – Asistent fiscal digital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .glowing-border {
      position: relative;
      border-radius: 1rem;
      overflow: hidden;
    }
    .glowing-border::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ec4899, #f59e0b);
      background-size: 400% 400%;
      animation: glowing 10s linear infinite;
      filter: blur(8px);
      opacity: 0;
      transition: opacity 0.3s;
      z-index: -1;
    }
    .glowing-border.glowing::before { opacity: 1; }
    @keyframes glowing {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Header -->
  <header class="sticky top-0 bg-white shadow z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <span class="text-2xl font-bold text-blue-600">MimiFiscal</span>
      </div>
      <nav class="space-x-6 hidden md:flex">
        <a href="#services" class="hover:text-blue-600">Servicii</a>
        <a href="#demo" class="hover:text-blue-600">Demo</a>
        <a href="#donatii" class="hover:text-blue-600">Donații</a>
        <a href="#contact" class="hover:text-blue-600">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white">
    <div class="max-w-7xl mx-auto px-6 py-20 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-6">Asistent fiscal digital pentru românii din Germania</h1>
      <p class="text-lg md:text-xl mb-8">MimiFiscal te ajută să economisești timp și bani prin automatizarea proceselor fiscale.</p>
      <a href="#demo" class="bg-white text-blue-600 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition">Încearcă demo</a>
    </div>
  </section>

  <!-- Servicii -->
  <section id="services" class="max-w-7xl mx-auto px-6 py-20">
    <h2 class="text-3xl font-bold text-center mb-12">Servicii oferite</h2>
    <div class="grid md:grid-cols-3 gap-8">
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-4">Calcul fiscal automatizat</h3>
        <p>Introdu datele tale și obții instant estimarea impozitelor și optimizărilor fiscale.</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-4">Generare formulare ANAF</h3>
        <p>Formulare completate automat, gata de descărcare și trimitere către autorități.</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold mb-4">Asistență digitală</h3>
        <p>Chatbot inteligent disponibil 24/7 pentru întrebările tale fiscale.</p>
      </div>
    </div>
  </section>

  <!-- Demo -->
  <section id="demo" class="bg-gray-100 py-20">
    <div class="max-w-4xl mx-auto px-6">
      <h2 class="text-3xl font-bold text-center mb-12">Încearcă demo</h2>
      <div id="chatCard" class="glowing-border bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto">
        <div id="chatbox" class="h-96 overflow-y-auto mb-4 p-4 bg-gray-50 rounded-lg space-y-2 text-sm"></div>
        <form id="chatForm" class="flex">
          <input id="userInput" type="text" placeholder="Scrie întrebarea ta..." class="flex-grow border border-gray-300 rounded-l-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <button type="submit" class="bg-blue-600 text-white px-6 rounded-r-full hover:bg-blue-700">Trimite</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Formular ANAF -->
  <section id="anaf" class="max-w-7xl mx-auto px-6 py-20">
    <h2 class="text-3xl font-bold text-center mb-12">Formular ANAF – Rezidență fiscală</h2>
    <div class="bg-white p-8 rounded-2xl shadow-lg max-w-2xl mx-auto text-center">
      <p class="mb-6">Descarcă cererea precompletată pentru rezidența fiscală:</p>
      <a href="assets/CerereResidentaFiscala.pdf" download="CerereResidentaFiscala.pdf" 
         class="mt-auto bg-blue-600 text-white px-8 py-3 rounded-full hover:bg-blue-700 transition transform hover:-translate-y-1 inline-block font-semibold">
         Descarcă
      </a>
    </div>
  </section>

  <!-- Donații -->
  <section id="donatii" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white py-20">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="text-3xl font-bold mb-6">Susține proiectul MimiFiscal</h2>
      <p class="mb-8">Platforma este în dezvoltare continuă. Donațiile tale ne ajută să creștem și să oferim mai multe servicii gratuite.</p>
      <a href="https://www.paypal.com/donate" target="_blank" class="bg-white text-purple-600 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition">Donează prin PayPal</a>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-7xl mx-auto px-6 py-20">
    <h2 class="text-3xl font-bold text-center mb-12">Contact</h2>
    <div class="bg-white p-8 rounded-2xl shadow-lg max-w-2xl mx-auto text-center">
      <p class="mb-4">Ai întrebări? Scrie-ne la:</p>
      <a href="mailto:support@mimifiscal.com" class="text-blue-600 font-semibold">support@mimifiscal.com</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-gray-400 py-6">
    <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center">
      <p>&copy; 2025 MimiFiscal. Toate drepturile rezervate.</p>
      <div class="flex space-x-4 mt-4 md:mt-0">
        <a href="#" class="hover:text-white">Politica de confidențialitate</a>
        <a href="#" class="hover:text-white">Termeni și condiții</a>
      </div>
    </div>
  </footer>

  <!-- Script -->
  <script>
    const chatForm = document.getElementById('chatForm');
    const userInput = document.getElementById('userInput');
    const chatbox = document.getElementById('chatbox');
    const chatCard = document.getElementById('chatCard');
    const apiEndpoint = '/api/ask';

    chatForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const message = userInput.value.trim();
      if (!message) return;

      appendMessage('Tu', message, 'bg-blue-100 text-blue-800');
      userInput.value = '';
      chatCard.classList.add('glowing');

      const loadingMessage = appendMessage('MimiFiscal', 'Se procesează...', 'bg-gray-100 text-gray-600');

      try {
        const response = await fetch(apiEndpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: message })
        });

        if (!response.ok) {
          throw new Error(`Eroare server: ${response.status}`);
        }

        const result = await response.json();
        const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || 'Nu am găsit un răspuns.';
        loadingMessage.remove();
        appendMessage('MimiFiscal', text, 'bg-gray-100 text-gray-800');
      } catch (error) {
        console.error(error);
        loadingMessage.remove();
        appendMessage('MimiFiscal', 'A apărut o eroare. Încearcă din nou.', 'bg-red-100 text-red-800');
      } finally {
        chatCard.classList.remove('glowing');
      }
    });

    function appendMessage(sender, text, style) {
      const msg = document.createElement('div');
      msg.className = `p-3 rounded-lg ${style}`;
      msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
      chatbox.appendChild(msg);
      chatbox.scrollTop = chatbox.scrollHeight;
      return msg;
    }
  </script>

</body>
</html>
